// Module included in the following assemblies:
//
// * service-mesh-docs-main/uninstall/ossm-uninstalling-openshift-service-mesh.adoc

:_mod-docs-content-type: PROCEDURE
[id="uninstalling-service-mesh-operator-control-plane-cli_{context}"]
= Uninstall {SMProduct} by using the CLI

Uninstalling {SMProductName} Operator 3 and the {Istio} control plane from an existing {ocp-product-title} instance requires removing the following:

* `Istio` resource
* `IstioCNI` resource
* {SMProductName} Operator 3
* `istio-system` project
* `istio-cni` project

Optionally, you can remove the Istio custom resource definitions (CRDs).

You can uninstall the {SMProductName} Operator 3 either by using the {ocp-product-title} command line interface (CLI).

.Procedure

. Delete the `Istio` resource:

.. Retrieve the `Istio` resource name by running the following command:
+
[source,terminal]
----
$ oc get istio -n istio-system
----

.. Replace `<name_of_custom_resource>` with the output from the previous command, and run the following command to remove the custom resource:
+
[source,terminal]
----
$ oc delete istio/<name_of_custom_resource>
----

. Delete the `IstioCNI` resource:

.. Retrieve the name of the `IstioCNI` resource by running the following command:
+
[source,terminal]
----
$ oc get istioCNI -n istio-system
----

.. Replace `<name_of_custom_resource>` with the output from the previous command, and run the following command to remove the custom resource:
+
[source,terminal]
----
$ oc delete istioCNI/<name_of_custom_resource>
----

. Delete the `istio-system` and `istio-cni` projects:

.. Delete the `istio-system` namespace by running the following command:
+
[source,terminal]
----
$ oc delete ns istio-system
----

.. Delete the `istio-cni` namespace by running the following command:
+
[source,terminal]
----
$ oc delete ns istio-cni
----

. Uninstall {SMProduct} Operator 3:

.. Delete the `servicemeshoperator3` subscription:
+
[source,terminal]
----
$ oc delete subscription servicemeshoperator3 -n openshift-operators
----
+
.Example output
[source,terminal]
----
output: subscription.operators.coreos.com "servicemeshoperator3" deleted
----

.. Check the current version of the `servicemeshoperator3` subscribed Operator in the `currentCSV` field by running the following command:
+
[source,terminal]
----
$ oc get clusterserviceversion -n openshift-operators | grep servicemeshoperator3 | awk '{print $1}'
----
+
.Example output
[source,terminal]
----
output: currentCSV: servicemeshoperator3.v3.0.0
----

.. Delete the cluster service version (CSV) for the Operator in the target namespace using the `currentCSV` value from the previous step:
+
[source,terminal]
----
$ oc delete clusterserviceversion servicemeshoperator3.v3.0.0 -n openshift-operators
----
+
.Example output
+
[source,terminal]
----
clusterserviceversion.operators.coreos.com "servicemeshoperator3.v3.0.0" deleted.
----
