// Module included in the following assemblies:
//
// * virt/virtual_machines/advanced_vm_management/virt-creating-vms-from-rh-images-overview.adoc

:_mod-docs-content-type: PROCEDURE 
[id="virt-modify-workload-node-heterogeneous-cluster_{context}"]

= Modifying workloads node placement in a heterogeneous cluster

:FeatureName: Golden image support for heterogeneous clusters
include::snippets/technology-preview.adoc[]

If you have a heterogeneous cluster but not want to enable multiple archiecture support, you can modify the workloads node placement in the `HyperConverged` custom resource (CR) to only include nodes with a specific architecture.

.Prerequisites

* You have installed the {oc-first}.

.Procedure

. Open the `HyperConverged` CR in your default editor by running the following command:
+
[source,terminal,subs="attributes+"]
----
$ oc edit hyperconverged kubevirt-hyperconverged -n {CNVNamespace}
----

. Edit the `HyperConverged` CR, to modify the workloads node placement to include only nodes with a specific architecture. For example:
+
[source,yaml]
----
apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
#...
  workloads:
    nodePlacement:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: kubernetes.io/arch
                    operator: In
                    values:
                      - <node_architecture> <1>
----
<1> Replace `<node_architecture>` with the target architecture. For example, to limit placement to AMD nodes, use `amd64`.

. Save and exit the editor to update the `HyperConverged` CR.
