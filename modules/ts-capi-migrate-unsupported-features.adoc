// Module included in the following assemblies:
//
// * machine_management/cluster_api_machine_management/cluster-api-troubleshooting.adoc

:_mod-docs-content-type: REFERENCE
[id="ts-capi-migrate-unsupported-features_{context}"]
= Unsupported configuration options

The Machine API does not support all configuration options for the Cluster API.
Some Machine API configurations cannot migrate to the Cluster API.
Additional configuration options might be supported in a future release.

Attempting to use the following configurations might cause a migration to fail or result in errors.

[NOTE]
====
This list might not be exhaustive.
====

[id="ts-capi-migrate-unsupported-features-general_{context}"]
== General limitations

The following limitations apply to all clusters:

* Machine API compute machines cannot migrate to the Cluster API unless the `NodeDeletionTimeout` field uses the Cluster API default value of `10s`.

* {product-title} does not support using the following Cluster API fields in the `spec.template.spec` stanza of a machine set or the `spec` stanza of a machine:

** `version`
** `readinessGates`
//OCPCLOUD-2714

* The Machine API does not support using the following Cluster API drain configuration options:

** `nodeDrainTimeout`
** `nodeVolumeDetachTimeout`
** `nodeDeletionTimeout`
//OCPCLOUD-2715

* The Cluster API does not support propagating labels or taints from machines to nodes.
//OCPCLOUD-2861

[id="ts-capi-migrate-unsupported-features-aws_{context}"]
== {aws-first} limitations

The following limitations apply to {aws-short} clusters:

* Machine API compute machines cannot use {aws-short} load balancers.
//OCPCLOUD-2709

* The Machine API does not support using the following Amazon EC2 Instance Metadata Service (IMDS) configuration options:
+
--
** `httpEndpoint`
** `httpPutResponseHopLimit`
** `instanceMetadataTags`
--
+
If you migrate a Cluster API machine template that uses IMDS configuration options to a Machine API compute machine set, expect the following behaviors:
+
--
** Any machines that the migrated Machine API machine set creates will not have these fields.
The underlying instances will not use these settings.
** Any existing machines that the migrated machine set manages will retain these fields.
The underlying instances will continue to use these settings.
--
//OCPCLOUD-2710

* {product-title} does not support using the following {aws-short} machine template fields:

** `spec.ami.eksLookupType`
** `spec.cloudInit`
** `spec.ignition.proxy`
** `spec.ignition.tls`
** `spec.imageLookupBaseOS`
** `spec.imageLookupFormat`
** `spec.imageLookupOrg`
** `spec.networkInterfaces`
** `spec.privateDNSName`
** `spec.securityGroupOverrides`
** `spec.uncompressedUserData`
//OCPCLOUD-2711

* The Cluster API does not support orphaning a nonroot EBS volume when its underlying {aws-short} EC2 instance is removed.
When an instance is terminated, the Cluster API removes all dependent volumes.
//OCPCLOUD-2717

* When migrating a Machine API resource to the Cluster API, the ignition version is hard-coded and might not match the user data secret that is passed through.
//OCPCLOUD-2719
