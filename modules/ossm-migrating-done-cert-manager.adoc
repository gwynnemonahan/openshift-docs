// Module included in the following assemblies:
//
// * service-mesh-docs-main/migrating/done/ossm-completing-migrating-cert-manager-assembly.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-migrating-done-cert-manager_{context}"]
= Completing the cert-manager tool migration

.Procedure

. Update the `app.controller.configmapNamespaceSelector` field by running the following command:
+
[source,terminal]
----
  helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
     --install \
     --reuse-values \
     --namespace istio-system \
     --wait \
     --set "app.controller.configmapNamespaceSelector=istio-injection=enabled"
----
+
[NOTE]
====
Before updating, ensure you have completely finished your migration and the new injection label, in this example `istio-injection=enabled`, is present on all workload namespaces before updating istio-csr.
====

. Create the `Istio` resource:
+
.Example `Istio` resource
[source,yaml]
----
  apiVersion: sailoperator.io/v1alpha1
  kind: Istio
  metadata:
    name: ossm3
  spec:
    ...
    namespace: istio-system
    values:
      global:
        caAddress: cert-manager-istio-csr.istio-system.svc:443
      pilot:
        env:
          ENABLE_CA_SERVER: "false"
----

Similar to the {SMProduct} 2.6 control plane, these settings disable the built-in CA server and instead use the istio-csr address.

After you have created your `Istio` resource, you can finish your migration by removing {SMProduct} {SMv2Version} resources.