// Module included in the following assemblies:
//
// * service-mesh-docs-main/about/ossm-migrating-migration-guides-assembly.adoc

:_mod-docs-content-type: ASSEMBLY
[id="ossm-migrating-cert-manager-assembly"]
= Migrating from Service Mesh 2 to Service Mesh 3 with cert-manager

If you are using {SMProductName} with the cert-manager tool, there are configurations changes you must do first before you can migrate your deployment and workloads to {SMProduct} 3. The configuration changes

[id="multitenant-deployment-with-the-cert-manager-tool_{context}"]
== Multitenant deployment with the cert-manager tool

If you have a multitenant deployment with the cert-manager tool, you must update the `istio-csr` deployment to incldue your {SMProduct} 3 control plane by running the following command:

[source,terminal]
----
  helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
      --install \
      --reuse-values \
      --namespace istio-system \
      --wait \
      --set "app.istio.revisions={basic,ossm3-v1-24-1}" <1>
----
+
<1> The `app.istio.revisions` field needs to include your {SMProduct} 3.0 control plane revision _before_ you create your `Istio` resource to ensure that proxies can properly communicate with the {SMProduct} 3.0 control plane.

.Next steps
Migrate your multitenant deployment
//PR for migrating multitenant https://github.com/openshift/openshift-docs/pull/86917
//when PR 86917 is merged, update the exref here accordingly

include::modules/ossm-migrating-cluster-wide-with-cert-manager.adoc[leveloffset=+1]

.Next steps

* Update `app.controller.configmapNamespaceSelector` field
